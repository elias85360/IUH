# Server (dev local, hors Docker)
PORT=4000
DATABASE_URL=postgres://postgres:postgres@localhost:5432/iot
REDIS_URL=redis://localhost:6379
# Ou en local compose, décommente et adapte :
#DATABASE_URL=postgres://postgres:postgres@db:5432/iot
#REDIS_URL=redis://redis:6379

# CORS
CORS_ORIGIN=http://localhost:5173,http://localhost:5174,http://192.168.2.30:8081

# OIDC / Auth 
RBAC_ENFORCE=1
ALLOW_API_KEY_WITH_RBAC=1
OIDC_ISSUER_URL=http://localhost:8080/realms/iot
#OIDC_ISSUER_URL=http://192.168.2.30:8080/realms/iot
OIDC_CLIENT_ID=iot-dashboard
OIDC_REQUIRE_AUD=1
OIDC_IGNORE_ISSUER=0
TRUST_PROXY=false
RATE_LIMIT=1000/1m

# Kienlab ingestion
DATA_SOURCE=kienlab
KIENLAB_BASE=http://eprophet.kienlab.com
KIENLAB_DEVICES=F0:24:F9:57:59:18,3C:8A:1F:0B:7C:C4,D4:8A:FC:A5:ED:E0,3C:8A:1F:0B:70:D4,D4:8A:FC:99:66:68,3C:8A:1F:0B:6F:A8
KIENLAB_API_KEY=
KIENLAB_POLL_MS=5000
KIENLAB_LENGTH=1000
KIENLAB_MAX_INIT_ROWS=500
KIENLAB_AUTH_SCHEME=Bearer
KIENLAB_DEBUG=0

# TimescaleDB
TSDB_MIRROR=0 # Si on veut activer la mise à jour depuis TSDB alors mettre 1
TSDB_READ=0 #Si on veut activer la lecture depuis TSDB alors mettre 1
TSDB_REFRESH_SECONDS=0
PREAGG_RETENTION_DAYS=90

# Logging
LOG_LEVEL=info
AUDIT_LOG_FILE=backend-audit.log

# HMAC (optional)
API_HMAC_ENFORCE=0
API_HMAC_KEY_ID=
API_HMAC_SECRET=

# API key (optionnel)
API_KEY=change_this_to_a_secure_random_value

# SMTP (optionnel)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=elias.bertet7@gmail.com
SMTP_PASS=change_this_to_a_secure_random_value

ALERTS_FROM=elias.bertet7@gmail.com
ALERTS_TO=soleileliasbertet@gmail.com
ALERTS_MIN_LEVEL=crit
ALERTS_COOLDOWN_SECONDS=300